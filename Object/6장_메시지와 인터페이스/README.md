# 6장 메시지와 인터페이스

# 클라이언트-서버 모델

- 협력은 클라이언트가 서버의 서비스를 요청하는 단방향 상호작용이다
- 클라이언트와 서버간 협력을 가능하게 해주는 매개체가 메시지이다

# 메시지란?

객체간 통신을 위한 유일한 수단이다

# 메서드란?

- 메시지를 수신한 실제 구현체 실제로 실행하는 함수
- 메시지 전송자는 수신자에 대해 알 필요가 없고 인터페이스를 통해 자신이 어떤 메시지를 전송해야 하는지만 알면 된다
- 메시지 수신자는 전송자에 대해 알 필요가 없다

# 퍼블릭 인터페이스의 품질을 높이는 방법

1. 디미터 법칙
2. 묻지 말고 시켜라
3. 의도를 드러내는 인터페이스
4. 명령-쿼리 분리

# 디미터 법칙

캡슐화를 위반하는 도트 참조를 남용하지 말아라

연쇄적인 도트 참조를 ‘train wreck’이라고 하는데 이는 객체 내부를 딥하게 탐색하는 것이므로 메시지 전송자와 수신자 사이에 강결합을 유발한다

# 묻지 말고 시켜라

메시지는 객체의 상태에 관해 묻지 말고 원하는 것만 시켜야 한다

객체의 상태 정보를 이용해 어떤 결정을 내리는 로직이 객체 외부에 존재하지 않는지 의심해야 한다

# 의도를 드러내는 인터페이스

메시지의 이름을 지을 때 내부 구현 정보는 숨기고 클라이언트의 의도만 표현해야한다

언제든 다른 객체로 대체 가능하도록 이름을 지어야 함

# 주의할 점

프로그래밍은 트레이드 오프의 산물이므로 위의 법칙을 맹목적으로 따라선 안된다

디미터의 법칙은 캡슐화를 위반하는 경우에만 적용해야함

묻지 말고 시켜라를 너무 맹신하면 코드가 분산되어 응집도가 오히려 낮아질 수 있다

# 명령-쿼리 분리 원칙

- 명령
    - 객체의 상태를 수정하는 오퍼레이션
    - 값을 반환하지 않음
    - mutable
- 쿼리
    - 값을 반환하는 오퍼레이션
    - 객체의 상태를 수정하지 않음
    - immutable
- 명령인 것과 동시에 쿼리일 수 없다
- 명령과 쿼리를 뒤섞으면 실행 결과를 예측하기 어렵고 디버깅하기 어려운 코드를 양산하게 됨

# 함수형 프로그래밍

stateless한 함수만 사용하여 실행 결과를 예측하기 쉽고 병렬 처리가 용이한 것이 장점
